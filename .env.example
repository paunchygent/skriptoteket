POSTGRES_DB=skriptoteket
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_HOST_PORT=55432

# Local tooling + `pdm run dev` (host-to-container mapping).
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:55432/skriptoteket

# Dev bootstrap account (set your own values in `.env`).
BOOTSTRAP_SUPERUSER_EMAIL=superuser@local.dev
BOOTSTRAP_SUPERUSER_PASSWORD=change-me

# Runner (ST-04-02)
# Note: Running the app container with sibling containers requires mounting /var/run/docker.sock
# (dev: compose.dev.yaml, prod opt-in: compose.runner.yaml).
RUNNER_IMAGE=skriptoteket-runner:latest
RUNNER_MAX_CONCURRENCY=1
RUNNER_TIMEOUT_SANDBOX_SECONDS=60
RUNNER_TIMEOUT_PRODUCTION_SECONDS=120
RUNNER_CPU_LIMIT=1.0
RUNNER_MEMORY_LIMIT=1g
RUNNER_PIDS_LIMIT=256

# Tool execution artifacts (local dev)
# IMPORTANT: the default `/var/lib/skriptoteket/artifacts` does not exist locally.
# Create the directory before running tools:
#   mkdir -p /tmp/skriptoteket/artifacts
ARTIFACTS_ROOT=/tmp/skriptoteket/artifacts
ARTIFACTS_RETENTION_DAYS=7

# Email (SMTP)
# Note: keep each EMAIL_* key only once (duplicates are confusing; last one wins).
EMAIL_PROVIDER=smtp
EMAIL_SMTP_HOST=mail.privateemail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USERNAME=change-me
EMAIL_SMTP_PASSWORD=change-me
EMAIL_SMTP_USE_TLS=true
EMAIL_SMTP_TIMEOUT=30
EMAIL_DEFAULT_FROM_EMAIL=noreply@hule.education
EMAIL_DEFAULT_FROM_NAME=Skriptoteket

# Email verification
EMAIL_VERIFICATION_BASE_URL=http://localhost:8000

# Observability (HuleEdu-compatible structlog)
SERVICE_NAME=skriptoteket
LOG_LEVEL=INFO
LOG_FORMAT=console

# Health checks
# Include SMTP dependency in /healthz (only applies when EMAIL_PROVIDER=smtp).
HEALTHZ_SMTP_CHECK_ENABLED=true

# AI / LLM (self-hosted OpenAI-compatible)
LLM_EDIT_ENABLED=true
LLM_EDIT_BASE_URL=http://localhost:8082
LLM_EDIT_MODEL=qwen3-coder-30b-a3b
LLM_EDIT_TEMPLATE_ID=edit_suggestion_v1
OPENAI_LLM_EDIT_API_KEY=change-me
LLM_COMPLETION_ENABLED=true
LLM_COMPLETION_BASE_URL=http://localhost:8082
LLM_COMPLETION_MODEL=qwen3-coder-30b-a3b
LLM_COMPLETION_TEMPLATE_ID=inline_completion_v1
OPENAI_LLM_COMPLETION_API_KEY=change-me
LLM_CHAT_ENABLED=true
LLM_CHAT_BASE_URL=http://localhost:8082
LLM_CHAT_MODEL=qwen3-coder-30b-a3b
LLM_CHAT_TEMPLATE_ID=editor_chat_v1
OPENAI_LLM_CHAT_API_KEY=change-me
LLM_CHAT_OPS_ENABLED=true
LLM_CHAT_OPS_BASE_URL=http://localhost:8082
LLM_CHAT_OPS_MODEL=qwen3-coder-30b-a3b
LLM_CHAT_OPS_TEMPLATE_ID=editor_chat_ops_v1
OPENAI_LLM_CHAT_OPS_API_KEY=change-me

# OpenAI/OpenRouter prompt caching + provider headers (optional; GPT-5-2 family)
#LLM_COMPLETION_PROMPT_CACHE_RETENTION=24h
#LLM_COMPLETION_PROMPT_CACHE_KEY=skriptoteket:completion
#LLM_COMPLETION_EXTRA_HEADERS={"HTTP-Referer":"https://skriptoteket.hule.education","X-Title":"Skriptoteket"}
#LLM_EDIT_PROMPT_CACHE_RETENTION=24h
#LLM_EDIT_PROMPT_CACHE_KEY=skriptoteket:edit
#LLM_EDIT_EXTRA_HEADERS={"HTTP-Referer":"https://skriptoteket.hule.education","X-Title":"Skriptoteket"}
#LLM_CHAT_PROMPT_CACHE_RETENTION=24h
#LLM_CHAT_PROMPT_CACHE_KEY=skriptoteket:chat
#LLM_CHAT_EXTRA_HEADERS={"HTTP-Referer":"https://skriptoteket.hule.education","X-Title":"Skriptoteket"}
#LLM_CHAT_OPS_PROMPT_CACHE_RETENTION=24h
#LLM_CHAT_OPS_PROMPT_CACHE_KEY=skriptoteket:chat_ops
#LLM_CHAT_OPS_EXTRA_HEADERS={"HTTP-Referer":"https://skriptoteket.hule.education","X-Title":"Skriptoteket"}

# UI tests (optional)
PLAYWRIGHT_HOST_PLATFORM_OVERRIDE=mac-arm64

# Home server observability creds (optional; used by compose.observability + reverse proxy)
#GRAFANA_ADMIN_PASSWORD=change-me
#PROMETHEUS_BASIC_AUTH_PASSWORD=change-me
#JAEGER_BASIC_AUTH_PASSWORD=change-me

# Frontend dev server (legacy SSR + SPA islands; ADR-0025 superseded by ADR-0027)
# If set, server-rendered templates load frontend assets from the Vite dev server.
# VITE_DEV_SERVER_URL=http://localhost:5173
