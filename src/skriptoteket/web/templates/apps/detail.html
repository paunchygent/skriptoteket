{% extends "base.html" %}
{% block help_context_id %}apps_detail{% endblock %}

{% block scripts_extra %}
  {{ vite_tags("src/entrypoints/runtime.ts") }}
{% endblock %}

{% block content %}
  <div class="huleedu-card huleedu-panel huleedu-stack">
    <p><a class="huleedu-link" href="/browse">← Tillbaka till katalog</a></p>
    <h2>{{ app.title }}</h2>

    {% if app.summary %}
      <p class="huleedu-muted">{{ app.summary }}</p>
    {% endif %}

    <form
      method="post"
      action="/apps/{{ app.app_id }}/start"
      hx-post="/apps/{{ app.app_id }}/start"
      hx-target="#result-container"
      hx-swap="innerHTML"
      class="huleedu-flex huleedu-gap-4"
    >
      <button type="submit" class="huleedu-btn huleedu-btn-navy">Starta</button>
    </form>

    <div id="result-container">
      {% if run %}
        {% include "tools/partials/run_result.html" %}
      {% else %}
        <div class="huleedu-alert huleedu-alert-info">
          Klicka på <strong>Starta</strong> för att köra appen.
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
