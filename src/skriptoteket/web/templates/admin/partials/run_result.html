<div class="huleedu-card huleedu-stack"{% if run.error_summary %} style="border-color: var(--huleedu-burgundy);"{% endif %}>
  <div class="huleedu-muted">
    <span class="huleedu-pill">Körning: {{ run.status | run_status_label }}</span>
    <span class="huleedu-pill">ID: {{ run.id }}</span>
    <span class="huleedu-pill">Version: {{ run.version_id }}</span>
  </div>

  {% if run.error_summary %}
    <div>
      <strong>Fel</strong>
      <pre>{{ run.error_summary }}</pre>
    </div>
  {% endif %}

  <div>
    <strong>HTML-förhandsvisning</strong>
    <iframe
      sandbox
      srcdoc="{{ (run.html_output or '') | e }}"
      style="width: 100%; min-height: 260px; border: var(--huleedu-border-width) solid var(--huleedu-navy); background-color: var(--huleedu-canvas);"
    ></iframe>
  </div>

  <details>
    <summary>Utdata</summary>
    <pre>{{ run.stdout or "" }}</pre>
  </details>
  <details>
    <summary>Felutdata</summary>
    <pre>{{ run.stderr or "" }}</pre>
  </details>

  <div class="huleedu-stack-sm">
    <strong>Artefakter</strong>
    {% if artifacts %}
      <ul class="huleedu-list">
        {% for a in artifacts %}
          <li class="huleedu-list-item">
            <a href="{{ a.download_url }}" class="huleedu-link" hx-boost="false" download>{{ a.path }}</a>
            <small class="huleedu-muted">({{ a.bytes }} byte)</small>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="huleedu-muted"><small>Inga artefakter.</small></p>
    {% endif %}
  </div>
</div>
