CANONICAL BENCHMARK v3 - STEP 1 (CODE REVIEW)

You are reviewing 2 Python files.

Output rules (STRICT):
- Plain text only.
- The VERY FIRST characters of your output must be: SUMMARY:
- Do not output any code blocks or triple backticks.
- Do not invent files or tests that are not present.
- For Evidence, copy-paste 1–2 exact lines from the code shown below.

Output format (follow exactly):
SUMMARY:
<2–4 sentences>

SCORECARD:
correctness: <0-5> - <1 sentence>
security: <0-5> - <1 sentence>
performance: <0-5> - <1 sentence>
maintainability: <0-5> - <1 sentence>
tests: <0-5> - <1 sentence>

FINDINGS:
1) <critical|high|medium|low> - <file> - <title>
   Evidence: <1–2 exact lines>
   Impact: <1 sentence>
   Fix: <1 sentence>
2) ...

FIX PLAN:
- [ ] <step 1>
- [ ] <step 2>
- [ ] ...

FILES:

FILE: archive_utils.py
import os
import zipfile
from pathlib import Path


def extract_zip(zip_path: str | Path, dest_dir: str | Path) -> None:
    """Extract all files from a zip into dest_dir."""
    dest_dir = str(dest_dir)
    with zipfile.ZipFile(zip_path) as zf:
        for name in zf.namelist():
            if name.endswith("/"):
                continue

            target_path = os.path.join(dest_dir, name)
            os.makedirs(os.path.dirname(target_path), exist_ok=True)

            # NOTE: read() is fine here because files are usually small.
            with zf.open(name) as src:
                data = src.read()
            with open(target_path, "wb") as dst:
                dst.write(data)


FILE: test_archive_utils.py
import io
import zipfile
from pathlib import Path

from archive_utils import extract_zip


def _make_zip_bytes(entries: dict[str, bytes]) -> bytes:
    buf = io.BytesIO()
    with zipfile.ZipFile(buf, "w") as zf:
        for name, data in entries.items():
            zf.writestr(name, data)
    return buf.getvalue()


def test_extract_basic(tmp_path: Path) -> None:
    zdata = _make_zip_bytes({
        "a.txt": b"hello",
        "dir/b.txt": b"world",
    })
    zpath = tmp_path / "t.zip"
    zpath.write_bytes(zdata)

    out = tmp_path / "out"
    out.mkdir()

    extract_zip(zpath, out)

    assert (out / "a.txt").read_bytes() == b"hello"
    assert (out / "dir" / "b.txt").read_bytes() == b"world"
